(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{5308:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(3817),s=n(6427),i=n(5234),u=n(7294),a=n(8216),o=n(5997),c=n(4695),l=n(3444),f=n(268),h=n(2953),d=(n(6129),n(5893));function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var s=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var m=function(e){(0,l.Z)(n,e);var t=p(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={expanded:!1},r.onClick=r.onClick.bind((0,c.Z)(r)),r}return(0,o.Z)(n,[{key:"onClick",value:function(e){e.preventDefault(),this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this,t=""!==this.props.description?(0,d.jsx)("span",{className:"description",children:this.props.description}):(0,d.jsx)(d.Fragment,{}),n=(0,d.jsx)("span",{className:"description",children:this.props.timeline}),r=(0,d.jsx)("button",{className:"button",onClick:function(t){window.location=e.props.path+e.props.id},children:"Edit"}),s=this.state.expanded?(0,d.jsxs)("div",{className:"button dropdown-item",children:[t,n,r]}):(0,d.jsx)(d.Fragment,{});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"button",onClick:this.onClick,children:(0,d.jsx)("span",{className:"event-name",children:this.props.name})}),s]})}}]),n}(u.Component),v=(n(7636),n(266)),y=n(809),g=n.n(y),b=function e(t,n,r){(0,a.Z)(this,e),this.ID=t,this.due=r,this.duration=n},j=864e5,x=function e(t,n){if((0,a.Z)(this,e),this.startTime=t%j,n>=j||n<=0)throw new Error("One or more of your preferences has an invalid duration.");this.duration=n},w=function e(t,n,r){if((0,a.Z)(this,e),this.ID=t,this.start=n,this.end=r,r<=n)throw new Error("You cannot have events that end before they start!")},k=function(){function e(t,n){(0,a.Z)(this,e),this.hull=Array(t).fill(null),this.reverse=n,this.ls=0,this.rs=0}return(0,o.Z)(e,[{key:"insert",value:function(e){for(;this.rs-this.ls>1&&this.hull[this.rs-2].intersect(this.hull[this.rs-1])>this.hull[this.rs-2].intersect(e)^this.reverse;)this.rs--;this.hull[this.rs++]=e}},{key:"query",value:function(e){for(;this.rs-this.ls>1&&this.hull[this.ls].cost(e)>=this.hull[this.ls+1].cost(e);)this.ls++;return this.hull[this.ls]}}]),e}(),S=function(){function e(t,n,r){(0,a.Z)(this,e),this.h=t,this.k=n,this.idx=r}return(0,o.Z)(e,[{key:"cost",value:function(e){return Math.pow(e-this.h,2)+this.k}},{key:"intersect",value:function(e){return(e.k-this.k+e.h*e.h-this.h*this.h)/(2*(e.h-this.h))}}]),e}(),Z=n(2593),D=9e5;function O(){return(O=(0,v.Z)(g().mark((function e(t,n,r,s){var i,u,a,o,c,l,f,h,d,p;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in i=[],u=[],a=[],e.prev=1,i.push(new x(new Date("2022-03-05T00:00").getTime(),T(480))),i.push(new x(new Date("2022-03-05T09:00").getTime(),T(15))),i.push(new x(new Date("2022-03-05T13:30").getTime(),T(15))),i.push(new x(new Date("2022-03-05T19:30").getTime(),T(15))),n)c=n[o],a.push(new b(o,T(c.minutes),c.due));for(l in r)f=r[l],u.push(new w(l,f.start,f.end));e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),s(e.t0.message),e.abrupt("return");case 14:if(2,!(h=_(2,a,u,i)).success){e.next=24;break}return d=h.result,p=Z.db.collection("users").doc(t),e.next=21,p.update({schedule:d.map((function(e){return{name:n[e.ID].name,ID:e.ID,start:e.start,end:e.end}}))});case 21:window.location.replace("/"),e.next=25;break;case 24:s(h.message);case 25:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function N(e){return e/D|0}function P(e,t){return e-t}function T(e){return 60*e*1e3}function C(e){for(var t=[],n=0;n<e.length;n++)t.push("1"===e.charAt(n));return t}function I(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]?1:0);return t.join("")}function _(e,t,n,r){if(0===t.length)return{result:[],success:!0,message:"Successfully Partitioned 0 tasks."};t.sort((function(e,t){return e.due-t.due}));var s=N(Date.now())+2,i=N(t[t.length-1].due);if(i<s)return{result:null,success:!1,message:"All of your due-dates are prior or too close to the current time!"};for(var u=Array(P(i,s)).fill(!0),a=Array(96).fill(!1),o=0;o<r.length;o++)for(var c=N(r[o].startTime),l=N(r[o].duration+D-1),f=c;f<c+l;f++)a[f%a.length]=!0;for(var h=0;h<n.length;h++)for(var d=N(n[h].start),p=N(n[h].end+D-1),m=Math.max(s,d);m<Math.min(i,p);m++)u[P(m,s)]=!1;for(var v=s;v<i;v++)a[v%a.length]&&(u[P(v,s)]=!1);for(var y=Array(u.length).fill(0),g=0,b=0;b<u.length;b++)u[b]&&(y[b]=g++);for(var j=Array(g).fill(0),x=0;x<u.length;x++)u[x]&&(j[y[x]]=x);for(var Z=Array(g).fill(!1),O=t.length-1,T=N(t[O].duration),_=i-1;_>=s;_--){if(0===T){if(--O<0)break;T=N(t[O].duration)}!u[P(_,s)]||_>=N(t[O].due)||(Z[y[P(_,s)]]=!0,T--)}if(0===T&&O--,O>=0)return{result:null,success:!1,message:"Error: It is impossible to generate a schedule without having overdue or overlapping tasks! Please modify the tasks, events, or preferences which you have set"};var E=C(function(e,t){var n=C(e),r=Array(e.length+1).map(Number.call,Number);r[e.length-1]=n[e.length-1];for(var s=e.length-2;s>=0;s--)r[s]=r[s+1]+n[s];for(var i=e.length,u=[],a=[],o=0;o<e.length;o++){for(var c=[],l=[],f=0;f<r[0]+1;f++)c.push([0,0]),l.push([0,0]);u.push(c),a.push(l)}for(var h=[],d=0;d<=i;d++)h.push(new k(r[0]+1,!0));h[i].insert(new S(i-t,0,i));for(var p=i-1;p>=0;p--)u[p][0][0]=(i-p-t)*(i-p-t),a[p][0][0]=i,h[p].insert(new S(p-t,u[p][0][0],p));for(var m=1;m<=r[0];m++){for(var v=i-1;v>=0;v--)if(!(r[v]<m)){var y=h[v+m].query(v);u[v][m][1]=y.cost(v),a[v][m][1]=y.idx}for(var g=new k(i,!0),b=i-2;b>=0;b--)if(!(r[b+1]<m)){var j=b+1;g.insert(new S(j-t,u[j][m][1],j));var x=g.query(b);u[b][m][0]=x.cost(b),a[b][m][0]=x.idx,h[b+m].insert(new S(b-t,u[b][m][0],b))}}for(var w=[],Z=0,D=r[0],O=u[0][D][0]<u[0][D][1]?0:1;Z!==i;){for(var N=a[Z][D][O],P=N-Z,T=0;T<P;T++)w.push(O);Z=N,1===O&&(D-=P),O^=1}return I(w)}(I(Z),e)),R=[];T=N(t[O=0].duration);for(var A=0;A<E.length;A++)if(E[A]){if(0===T){if(++O===t.length)break;T=N(t[O].duration)}var B=(j[A]+s)*D,F=t[O].ID;if(0===R.length)R.push(new w(F,B,B+D));else{var U=R[R.length-1];U.end===B?(R.pop(),R.push(new w(F,U.start,U.end+D))):R.push(new w(F,B,B+D))}T--}return{result:R,success:!0,message:"Successfully Partitioned "+t.length+" tasks."}}function E(){var e=(0,r.ZP)(),t=(0,u.useState)(null),n=t[0],a=t[1];if(e.loading!==r._H)return null;if(null==e.authUser)return window.location.href="/login",null;var o=(0,d.jsx)(d.Fragment,{});null!=n&&(o=(0,d.jsx)(s.jj,{error:n}));var c=e.userData.projects,l=Object.keys(c).length>0?(0,d.jsx)("div",{className:"main-task-menu vertical-menu",children:Object.keys(c).map((function(e,t){var n=e,r=c[e].name,s=c[e].description,i=new Date(c[e].due).toLocaleString("en-US",{hour12:!0}),u=c[e].minutes;return(0,d.jsx)(m,{id:n,name:r,description:s,path:"/create/project/",timeline:"Due Date: ".concat(i,", Minutes Required: ").concat(u)},n)}))}):(0,d.jsx)("p",{children:"You have no projects added!"}),f=e.userData.events,h=Object.keys(f).length>0?(0,d.jsx)("div",{className:"main-task-menu vertical-menu",children:Object.keys(f).map((function(e,t){var n=e,r=f[e].name,s=f[e].description,i=new Date(f[e].start).toLocaleString("en-US",{hour12:!0}),u=new Date(f[e].end).toLocaleString("en-US",{hour12:!0});return(0,d.jsx)(m,{id:n,name:r,description:s,path:"/create/event/",timeline:"Starts at: ".concat(i,", Ends at ").concat(u)},n)}))}):(0,d.jsx)("p",{children:"You have no events added!"}),p=Object.keys(c).length>0||Object.keys(f).length>0?(0,d.jsx)("button",{onClick:function(t){t.preventDefault(),function(e,t,n,r){return O.apply(this,arguments)}(e.authUser.uid,e.userData.projects,e.userData.events,a).then((function(){}))},className:"button",children:"Generate Schedule!"}):(0,d.jsx)(d.Fragment,{});return(0,d.jsxs)("div",{className:"fullscreen",children:[(0,d.jsx)("title",{children:"Home"}),(0,d.jsx)(i.ZP,{authInfo:e}),(0,d.jsxs)("div",{className:"content",children:[(0,d.jsx)(s.Dx,{name:"".concat(e.userData.username,"'s Projects")}),(0,d.jsx)(s.iz,{}),l,(0,d.jsx)(s.Dx,{name:"".concat(e.userData.username,"'s Events")}),(0,d.jsx)(s.iz,{}),h,p,o]})]})}},6129:function(e,t,n){"use strict";var r=n(2809),s=n(8216),i=n(5997),u=n(4695),a=n(3444),o=n(268),c=n(2953),l=n(7294),f=n(2593),h=n(5893);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var s=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var p=function(e){(0,a.Z)(n,e);var t=d(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).state={name:"",description:"",minutes:"",due:"",inputType:"text",submitted:!1,message:""},r.onSubmit=r.onSubmit.bind((0,u.Z)(r)),r.onFocus=r.onFocus.bind((0,u.Z)(r)),r.onBlur=r.onBlur.bind((0,u.Z)(r)),r}return(0,i.Z)(n,[{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.submitted){this.setState({submitted:!0});var n,r=this.props.authInfo.authUser.uid,s=f.db.collection("users").doc(r).collection("projects");(n={name:this.state.name,description:this.state.description,minutes:this.state.minutes,due:new Date(this.state.due).getTime()},null!=t.props.prevState?s.doc(t.props.prevState.docID).set(n):s.add(n)).then((function(){console.log("Document successfully written!"),window.location.replace("/user")})).catch((function(e){console.error("Error writing document: ",e),t.setState({submitted:!1})}))}}},{key:"onFocus",value:function(e){this.setState({inputType:"datetime-local"})}},{key:"onBlur",value:function(e){""===e.target.value&&!e.target.validity.badInput&&this.setState({inputType:"text"})}},{key:"render",value:function(){var e=this;return(0,h.jsxs)("form",{className:"form",onSubmit:this.onSubmit,children:[(0,h.jsx)("input",{id:"name",required:!0,className:"top-input-offset",type:"text",onChange:function(t){return e.setState({name:t.target.value})},placeholder:"Project Name"}),(0,h.jsx)("input",{id:"description",type:"text",onChange:function(t){return e.setState({description:t.target.value})},placeholder:"Description (Optional)"}),(0,h.jsx)("input",{id:"minutes",required:!0,min:0,type:"number",onChange:function(t){return e.setState({minutes:t.target.value})},placeholder:"Minutes Required"}),(0,h.jsx)("input",{id:"due",required:!0,type:this.state.inputType,onFocus:this.onFocus,onBlur:this.onBlur,onChange:function(t){return e.setState({due:t.target.value})},placeholder:"Due Date"}),(0,h.jsx)("input",{type:"submit",className:"submit",value:this.state.message})]})}},{key:"componentDidMount",value:function(){if(null!=this.props.prevState){for(var e in this.setState({message:"Update Project!"}),this.props.prevState.value){var t=this.props.prevState.value[e];if("due"===e){var n=new Date(t);t=new Date(n.getTime()-6e4*n.getTimezoneOffset()).toISOString().slice(0,-1)}document.getElementById(e).value=t,this.setState((0,r.Z)({},e,t))}this.setState({inputType:"datetime-local"})}else this.setState({message:"Create Project!"})}}]),n}(l.Component);t.Z=p},5234:function(e,t,n){"use strict";n.d(t,{ZP:function(){return u}});var r=n(2593),s=(n(7294),n(5893));function i(){return(0,s.jsx)("div",{className:"divider-vertical"})}var u=function(e){return null==e.authInfo.authUser?(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("a",{className:"item",href:"/",children:"Home"}),(0,s.jsx)(i,{}),(0,s.jsx)("a",{className:"item right",href:"/login",children:"Login"}),(0,s.jsx)("p",{className:"item",children:"or"}),(0,s.jsx)("a",{className:"item",href:"/signup",children:"Sign Up"})]}):(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("a",{className:"item",href:"/",style:{padding:0},children:(0,s.jsx)("img",{src:"/images/logo.png"})}),(0,s.jsx)(i,{}),(0,s.jsx)("a",{className:"item",href:"/create",children:"Create A Task"}),(0,s.jsx)(i,{}),(0,s.jsxs)("div",{className:"profile right",children:[(0,s.jsx)("a",{className:"item",href:"/user",children:"My Tasks"}),(0,s.jsx)("a",{className:"dropdown-item",href:"/logout",onClick:function(e){r.I8.signOut();return!0},children:"Log Out"})]})]})}},6427:function(e,t,n){"use strict";n.d(t,{qO:function(){return s},Dx:function(){return i},iz:function(){return u},jj:function(){return a}});n(7294),n(2593);var r=n(5893);function s(e){var t=e.buttons.map((function(e){var t=e.name,n=e.description,s=e.href;return(0,r.jsxs)("a",{className:"button",href:s,children:[(0,r.jsx)("span",{className:"event-name",children:t}),(0,r.jsx)("span",{className:"description",children:n})]},t)}));return(0,r.jsx)("div",{className:"main-task-menu",children:t})}function i(e){return(0,r.jsx)("h1",{className:"title",children:e.name})}function u(){return(0,r.jsx)("hr",{className:"divider"})}function a(e){return(0,r.jsx)("div",{className:"error",children:e.error})}},3817:function(e,t,n){"use strict";n.d(t,{_H:function(){return f},ZP:function(){return h}});var r=n(2809),s=n(266),i=n(809),u=n.n(i),a=n(7294),o=n(2593);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=!1;function h(){var e=(0,a.useState)(null),t=e[0],n=e[1],r=(0,a.useState)(true),i=r[0],c=r[1],h=(0,a.useState)(null),d=h[0],p=h[1];return(0,a.useEffect)((function(){var e=o.I8.onAuthStateChanged((function(t){(function(){var e=(0,s.Z)(u().mark((function e(t){var r,s,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return n(null),c(f),e.abrupt("return");case 4:return e.next=6,o.db.collection("users").doc(t.uid).get();case 6:return r=e.sent.data(),e.next=9,o.db.collection("users").doc(t.uid).collection("projects");case 9:return s=e.sent,e.next=12,s.get().then((function(e){var t={};e.forEach((function(e){t[e.id]=l({},e.data())})),r.projects=t}));case 12:return e.next=14,o.db.collection("users").doc(t.uid).collection("events");case 14:return i=e.sent,e.next=17,i.get().then((function(e){var t={};e.forEach((function(e){t[e.id]=l({},e.data())})),r.events=t}));case 17:n(t),p(r),c(f);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t).then((function(){return e()}))}))}),[]),{authUser:t,loading:i,userData:d}}},2593:function(e,t,n){"use strict";n.d(t,{db:function(){return s},I8:function(){return i}});var r=n(5503);n(3759),n(6690),n(3935);r.Z.apps.length||r.Z.initializeApp({apiKey:"AIzaSyBm2m4FM61C-VrKC3lRLT_8Cq0GxgblrGg",authDomain:"classified-bfa24.firebaseapp.com",databaseURL:"https://classified-bfa24-default-rtdb.firebaseio.com",projectId:"classified-bfa24",storageBucket:"classified-bfa24.appspot.com",messagingSenderId:"685388058525",appId:"1:685388058525:web:77dafea83b88b620e9a974",measurementId:"G-8C5N4Z77YP"});var s=r.Z.firestore(),i=r.Z.auth()},7636:function(e,t,n){"use strict";n.d(t,{aK:function(){return a},th:function(){return o},Bt:function(){return l}});var r=n(266),s=n(809),i=n.n(s),u=n(2593);function a(e,t){return{docID:e,value:t}}function o(e,t){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.db.collection("users").doc(t),s=r.collection("projects"),e.next=4,s.doc(n).delete();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(i().mark((function e(t,n){var r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.db.collection("users").doc(t),s=r.collection("events"),e.next=4,s.doc(n).delete();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7505:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return n(5308)}])},4695:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},8216:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5997:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{Z:function(){return s}})},2953:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,{Z:function(){return r}})},3444:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,{Z:function(){return s}})},268:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return i}});var s=n(4695);function i(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,s.Z)(e)}}},function(e){e.O(0,[972,834,751,774,888,179],(function(){return t=7505,e(e.s=t);var t}));var t=e.O();_N_E=t}]);